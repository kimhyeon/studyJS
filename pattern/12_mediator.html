<!DOCTYPE html>
<html>
<head>
	<title>중재자 패턴</title>
</head>
<body>
<script type="text/javascript">

// 여러 개의 객체들을 관리하는 패턴이다.
// 서로의 말을 전달하는 공간을 마련했다는 점에서 채팅방과 비슷하고, 어떤 메세지를 바꿔서 표현할 수 있다는 점에서 통역과도 비슷합니다.
// 여러 개의 객체들을 모두 관리하는 관제탑 같은 역할을 합니다. 등록된 객체들의 상황을 통제하고 관리할 수 있습니다.

var Josephus = (function() {
	function Josephus() {
		this.participants = [];
	}
	Josephus.prototype.register = function(participant) {
		this.participants.push(participant);

	}
	Josephus.prototype.deliver = function(sender, message) {
		this.participants.forEach(function(participant) {
			if (participant !== sender) {
				console.log("%s 님이 %s 님에게 %s 라고 말합니다.", sender, participant, message);
			}
		});
	}
	return Josephus;
})();

var josephus = new Josephus();
josephus.register("Jew");
josephus.register("Roman");
josephus.deliver("Jew", "우리 땅에서 물러가라!");
josephus.deliver("Roman", "네놈들을 멸망시켜주겠다!");

</script>
</body>
</html>